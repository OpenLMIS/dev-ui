# OpenLMIS-UI Application Structure
The OpenLMIS-UI is an Angular V1 application that communicates with OpenLMIS Services to create a human-centered user-interface to the OpenLMIS application. This UI application is meant to be extendable, but provide enough framework for developers to create a consistent experience across modules. 

This UI aims to support accessiblity, consistency, and i18n compliance.

More high-level information about the OpenLMIS is available below â€” for more technical documentation consult the coding conventions or Javascript Documentation

## Running Process
The entire OpenLMIS-UI is run from a single page application that is loaded from a HTML page, which doesn't do anything more then include files created in the build process and define the initial application area. The markup for this initial page is located here.

When the HTML page is loaded, an Angular applicaiton called openlmis is started. This application requires all other Javascript modules that provide specialized pieces of logic. No module should ever require 'openlmis' or add a module directly to it. *The openlmis Angular module will be dynamically generated by the build process, but currently this isn't implemented and the openlmis module can be found here.*

The OpenLMIS-UI is primarily state driven, meaning that the browser's URL is what determines most of what is displayed on the screen. Once the application starts, the browser's current URL is parsed by UI-Router which will populate the main application view and retrieve data from the browser and the OpenLMIS Services. Any module can define an application route which will provide custom views and logic.

### Service Authentication
Authentication with the OpenLMIS Services is handled by the openlmis-auth module. This module hooks into UI-Router and $HTTP calls to manage which user is authenticated by fetching, reading, and storing access tokens used by OpenLMIS Services. No OpenLMIS-UI modules should need to include openlmis-auth because it's included by the OpenLMIS-UI application.

### Offline and Low-Bandwidth
The OpenLMIS-UI plans to support users who are offline or have low-bandwidth connections by focusing on the browser's AppCache and localstorage technologies. This will result in page load times that appear faster after the browser's first time loading the OpenLMIS-UI. OpenLMIS Service requests that don't often change will be cached, and updated when the OpenLMIS-UI application detects the internet. Application assets, such as Javascript, CSS, and image files, will be bundled together into as few files as possible, because while the overall filesize will be larger than unbundled assets, fewer network requests require less bandwidth.

See the coding conventions for specifics about how different file types should be included.

## Build Process
The OpenLMIS-UI is built using the Grunt task runner, which very generally follows this build process for different types of files:
* Include 3rd-party libraries installed by Bower
* Include files from `src` depending on type in a specific order
* Compile and compress all the files
* Write out a generic openlmis file

_For specific file type build processes, see the coding conventions._

This build process allows us to create optimal files for low-bandwidth settings, while still maintaining verbose and well documented files.

## Extensibility Plan
There are three places to extend behavior already created in the OpenLMIS-UI:
* Overwrite SASS Variables
* Overwrite UI-Router states
* Overwrite an entire file

### Overwrite SASS Variables
*STUB*

### Extending UI-Router
UI-Router contains logic for the application state, which makes it an ideal place to change data or controllers that are associated with a view. *This is a stub.*

### Overwritting Files at Build
*Stub stub stub*